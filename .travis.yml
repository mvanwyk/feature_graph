language: python
python:
- '3.7'
- '3.8'
install:
- pip install poetry
- poetry install
script:
- pytest --doctest-modules -v --cov feature_graph --cov-report term-missing
after_success:
- coveralls
before_deploy:
  - poetry config pypi-token.pypi $PYPI_TOKEN
  - poetry build
deploy:
  provider: script
  script: poetry publish
  on:
    tags: true
    condition: "$TRAVIS_PYTHON_VERSION == 3.7"
    branch: master
